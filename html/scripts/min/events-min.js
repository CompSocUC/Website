var debounce=function(e,t){var r=!1;return function(){var n=this,a=arguments;r===!1&&(r=!0,e.apply(n,a),setTimeout(function(){r=!1},t))}},pretty_date=function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=e.split("+")[0],a=new Date(n),l=function(e){return e>12?[e-12,!0]:[e,!1]}(a.getUTCHours()),s=function(e){return 1===e.length?"0"+e:e}(String(a.getUTCMinutes())),u=r[a.getUTCDay()]+", "+a.getUTCDate()+" "+t[a.getUTCMonth()]+", "+l[0]+":"+s+(l[1]?"pm":"am");return u},create_event=function(e,t,r,n){var a=document.createElement("span");a.setAttribute("class","title"),a.innerText=e;var l=document.createElement("span");l.setAttribute("class","time"),l.innerText=pretty_date(r);var s=document.createElement("a");s.setAttribute("class","link"),s.setAttribute("href","https://www.facebook.com/events/"+t+"/"),s.setAttribute("target","_blank"),s.innerText="View Event";var u=new Image;u.src=n,u.setAttribute("alt",e);var i=document.createElement("div");return i.setAttribute("class","event"),i.appendChild(u),i.appendChild(a),i.appendChild(l),i.appendChild(s),i},animate_rollover=function(e,t,r,n){var a=(n+1)%r,l=(a+1)%r,s=e.children(),u=s[0],i=s[1];return u.style.left="-100%",i.style.left="0",setTimeout(function(){e[0].removeChild(u),u.style.left="0",e.append(t[l]);var r=e.children()[1];r.style.left="100%"},500),a},setup_rollover=function(e,t){var r=$("#event-scroll");r.html("");var n=$(e.data).map(function(e,t){return create_event(t.name,t.id,t.start_time,t.cover.source)}),a=n.length;r.append(n[0]),r.append(n[1]);var l=r.children()[0],s=r.children()[1];l.style.left="0",s.style.left="100%";var u=0,i=function(){u=animate_rollover(r,n,a,u)},o=setInterval(i,t),c=debounce(function(e){return e.preventDefault(),clearInterval(o),u=animate_rollover(r,n,a,u),o=setInterval(i,t),!1},500),d=debounce(function(e){e.preventDefault(),clearInterval(o),u=(u-1+a)%a;var l=r.children(),s=l[0],c=l[1];r[0].removeChild(c),c.style.left="0";var d=n[u];return d.style.left="-100%",r.prepend(d),setTimeout(function(){s.style.left="100%",d.style.left="0"},1),o=setInterval(i,t),!1},500);$("#next-arrow").on("click",c),$("#prev-arrow").on("click",d)},setup_arrows=function(e){var t=document.createElement("a");t.setAttribute("class","next-arrow"),t.setAttribute("id","next-arrow"),t.setAttribute("href","#"),t.innerText="Next";var r=document.createElement("a");r.setAttribute("class","prev-arrow"),r.setAttribute("id","prev-arrow"),r.setAttribute("href","#"),r.innerText="Previous",e.append(r),e.append(t)},show_single=function(e){var t=e.data[0],r=$("#event-scroll");r.append(create_event(t.name,t.id,t.start_time,t.cover.source))},event_callback=function(e){var t=$("#event-holder");0===e.data.length?(t.addClass("text"),t.html("<p>There are no upcoming events.</p>"),t.css("padding-bottom","0"),t.css("margin-top",0)):1===e.data.length?show_single(e):(setup_arrows(t),setup_rollover(e,5e3))};$(function(){$(document).ready(function(){$.ajax({dataType:"json",url:"/resources/events.php",success:event_callback})})});