var generate_resource=function(e,t,r){var a=document.createElement("span");a.setAttribute("class","title"),a.innerHTML=e;var n=document.createElement("img");n.src=r,n.setAttribute("class","img"),n.setAttribute("style","background-image: url("+r.source+"); background-position: "+r.offset_x+"% "+r.offset_y+"%"),n.setAttribute("alt",e);var s=document.createElement("a");s.setAttribute("href",t),s.setAttribute("target","_blank"),s.appendChild(n),s.appendChild(a);var c=document.createElement("div");c.setAttribute("class","clearfix");var o=document.createElement("li");return o.appendChild(s),o.appendChild(c),o},display=function(e,t){var r=document.createElement("ul");r.setAttribute("class","resources");var a=$("#"+e),n=$("#"+e+" .loading");n.css("display","none");for(var s=0;s<t.length;s++)r.appendChild(t[s]);a.get()[0].appendChild(r)},resource_callback=function(e,t){console.log(t);for(var r=[],a=0;a<t.length;a++){var n=t[a];if("file"==n.type&&".DS_Store"!=n.name){var s=generate_resource(n.name,n.download_url,e.image);r.push(s)}}display(e.id,r)};$(function(){$(document).ready(function(){for(var e=0;e<resources.length;e++){var t=resources[e],r=t.folder;$.ajax({dataType:"json",url:"resources/resource-loader.php?dir="+encodeURIComponent(r),success:function(e){resource_callback(t,e)}})}})});